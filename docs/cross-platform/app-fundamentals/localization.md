---
title: 应用程序用户界面的本地化
description: 本文档介绍的国际化和本地化的跨平台概念，并检查它们如何影响应用程序设计。
ms.prod: xamarin
ms.assetid: CC6847B2-23FB-4EDE-9F7E-EF29DD46A5C5
author: asb3993
ms.author: amburns
ms.date: 03/22/2017
ms.openlocfilehash: a1218d836aad827390d9f5e70de189a869b7c6b8
ms.sourcegitcommit: 654df48758cea602946644d2175fbdfba59a64f3
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 07/11/2019
ms.locfileid: "67830990"
---
# <a name="localization"></a>本地化

本指南介绍的概念*国际化*并*本地化*以及如何生成 Xamarin 移动应用程序使用这些概念的说明的链接。

如果你想要直接跳到本地化的 Xamarin 应用的技术详细信息，请开始这些特定于平台的操作方法文章之一：

- [**Xamarin.Forms** ](~/xamarin-forms/app-fundamentals/localization/index.md)跨平台本地化使用 RESX 文件。
- [**Xamarin.iOS** ](~/ios/app-fundamentals/localization/index.md)本机平台本地化。
- [**Xamarin.Android** ](~/android/app-fundamentals/localization.md)本机平台本地化。

## <a name="i18n-and-l10n"></a>i18n 和 L10n

*国际化*是使代码能够显示不同的语言和调整其显示为不同的区域设置 （如数字和日期格式设置） 的过程。 这也称为*全球化*。

*本地化*是遵循 – 为每种语言创建资源 （如字符串和图像） 和绑定在与国际化应用程序的步骤。

它通常缩写为 i18n – 18 字母"i"和"n"之间的简写的国际化。 本地化同样缩短到 L10n – 10 个字母"L"和"n"之间。

## <a name="overview"></a>概述

本文档介绍了使用国际化和本地化，以及如何将它们应用到移动应用程序开发通常相关联的概念。
设计和构建应用程序，操作时可能以前已进行硬编码，但其必须本地化包括参数化：

- 屏幕布局和文本，
- 图标、 图形和颜色、
- 视频和声音文件
- 动态文本和文本格式 （如数字、 货币和日期），
- 对于从右到左 (RTL) 语言，布局更改和
- 数据排序。

无论哪个移动平台，你的应用面向这些提示将帮助您构建高品质本地化的应用。


## <a name="design-considerations"></a>设计注意事项

构建应用程序，以便可以对其内容进行本地化称为国际化。 正确进行国际化是多个不同的语言只允许字符串要在运行时加载 – 设计良好的应用应允许对要更改的所有资源基础语言和区域设置 （包括图像、 声音和视频），可以调整格式设置和布局，以应对不同的大小调整的字符串。

本部分讨论一些设计注意事项，以构建国际化应用程序时考虑到帐户。

### <a name="layouts-and-string-length"></a>布局和字符串长度

中文和日语字符串可以是非常短 – 有时一个或两个字符可以是有意义足够的输入的字段标签。

（例如） 正使用德语字符串可能会很长;有时在英语中的相对较短单词变得用其他语言 – 剪切或其他意外重排你的布局也变得非常长。

比较英语、 德语和日语中的 iOS 主屏幕上的几个项的字符串长度：

[![](localization-images/language-compare-sml.png "正使用德语 vs 日语字符串长度")](localization-images/language-compare.png#lightbox)

请注意，**设置**英文 （8 个字符） 的德语译文，但只有 2 个字符，日语需要 13 个字符。

其中显示标签和输入的字段是由并行的布局是难以使用时标签长度可能大不相同。 通常是更轻松地本地化，因为整个屏幕的宽度是可用的标签和输入字段上方显示标签的位置的布局。

作为一般规则，如果您正在构建固定的布局 （尤其是通过并行元素） 允许在至少比英语字符串的多个宽度需要标签和文本的 50%。 这不会解决每个问题，但将提供将在许多情况下工作的缓冲区。

### <a name="input-validation"></a>输入的验证

编写验证规则时要注意的假设。 这可能看起来有效要求输入为"要求"至少三个字符，在英语中，因为单个字母几乎没有任何意义的文本字段。 中文和日语版但单个字符可能是有效的输入和验证消息"至少 3 个字符是必需的"不难理解为这些语言。

其他看似简单的任务如验证电子邮件地址或网站 URL 会变得更复杂的字符不限于 ASCII 的子集。

编写国际化注意 – 你的验证规则选择限制性最弱的规则，或编写逻辑，使其工作方式不同于每种语言。

### <a name="images-and-color"></a>图像和颜色

不是每个映像需要更改基于用户的语言选择。 很多图标或照片将适用于所有用户，并不重要能否使用何种语言。
某些资源意义进行本地化，如：

- 图像进行描述人或特定地点 – 您的应用程序可能会觉得更贴近用户，如果它显示了本地人/位置。
- 图标 – 某些插图可以是特定于区域性的并且您可以使您的应用程序易于使用的本地化图像以反映本地了解。
- 颜色 – 某些区域性了解颜色以不同方式 – red 可能意味着在一个区域，但在另一个祝您好运警告。 设计您的应用程序以确定是否应构建一种机制来对颜色进行本地化时，请与母语。


### <a name="videos-and-sound"></a>视频和声音

视频和本地化应用程序，因为相对简单，若要获取翻译的字符串时，记录多个语音朗读跟踪时的声音存在特殊挑战或视频剪辑会既昂贵又困难。

视频和声音文件的多个副本还可以极大地可能会增加你的应用程序的大小 （尤其是如果本地化为大量的语言或有许多的媒体文件）。 您可以考虑下载仅所需的语言的资产，用户已安装应用，但这还可能导致糟糕的用户体验在慢速网络上。

通常有多种方法可以解决本地化问题-最重要的是将其视为前期，并确保你的应用程序设计用来处理它们。


### <a name="dates-times-numbers-and-currency"></a>日期、 时间、 数字和货币

如果使用的.NET 格式设置函数，请记住，以便正确分析十进制分隔符 （和避免转换所引发的异常） 指定的区域性。 例如 1.99 和 1,99 是有效的十进制表示形式，具体取决于您的区域设置。

当数据来自已知源 (即。 从您自己的代码或您控制 web 服务) 可以进行硬编码匹配等 InvariantCulture 这将适用于标准的英语语言格式设置格式的区域性标识符。

```csharp
double.Parse("1,999.99", CultureInfo.InvariantCulture);
```

如果由应用用户正在输入数据、 分析使用 CultureInfo 实例，它反映其区域设置：

```csharp
double.Parse("1 999,99", CultureInfo.CreateSpecificCulture("fr-FR"));
```

请参阅[分析数字字符串](https://msdn.microsoft.com/library/xbtzcc4w(v=vs.110).aspx)并[分析日期和时间字符串](https://msdn.microsoft.com/library/2h3syy57(v=vs.110).aspx)MSDN 文章的其他信息。

<a name="rtl" />

### <a name="right-to-left-rtl-languages"></a>右到左 (RTL) 语言

（例如），某些语言，例如，阿拉伯语、 希伯来语和乌尔都语从右到左读取。
支持这些语言的应用程序应使用从右到左读取器，例如调整屏幕设计：

- 文本应为右对齐。
- 标签应输入字段右侧显示。
- 通常反转按钮的默认位置。
- 分层导航轻扫和动画 （和其他导航隐喻和动画），使用方向也应撤消上下文。

IOS 和 Android 支持从右到左布局和字体呈现，具有内置功能，可帮助进行更高版本的调整。 Xamarin.Forms 不当前自动支持从右向左呈现。

### <a name="sorting"></a>排序

不同的语言定义其字母表的排序顺序不同，即使它们使用相同的字符集。

请参阅[详细信息的字符串比较](https://msdn.microsoft.com/library/dd465121(v=vs.110).aspx#the_details_of_string_comparison)中[在.NET Framework 中使用字符串的最佳做法](https://msdn.microsoft.com/library/dd465121(v=vs.110).aspx)有关示例的语言 (CultureInfo) 会影响排序顺序。

不太可能移动平台上的内置数据库功能将支持特定于语言的排序顺序这样，您可能需在您的业务逻辑中实现附加代码。

### <a name="text-search"></a>文本搜索

请确保可以编写和测试记住多个语言与你搜索算法。 要考虑的事项包括：

- 自动完成 – 如果您生成一个自动完成函数，请确保源与用户的语言相关建议。
- 对数据 – 匹配查询将搜索查询中特定输入语言执行对只是用该语言编写的内容或者对应用程序中的所有内容？
- 词干分析 – 如果你的搜索生成来搜索相似的单词、 word 根和其他搜索优化，是为您支持的所有语言构建这些优化措施？
- 排序-请确保对结果进行排序正确 （参阅上文）。


### <a name="data-from-external-sources"></a>来自外部源的数据

许多应用程序从外部源，从 Twitter 下载数据和 RSS 源到天气、 新闻或股票价格。 向用户显示此时需要考虑您将向其显示的不相关或无法读取信息的屏幕的可能性。

有几种策略可用于尝试并确保您的应用程序将显示与用户相关的数据：

- 不同的源 – 你的应用程序可能从具体取决于用户的语言或区域设置不同的源下载数据。 区域设置的新闻、 天气和股票价格可能会更有意义不是从北美的数据源的内容下载。
- 本地化的显示 – 如果您要显示 Twitter 或照片馈送，您应元数据 （如所用的时间） 中显示他或她自己的语言，即使内容本身仍保留在原始语言。
- 翻译 – 您可以为应用执行的操作的传入数据的机器翻译构建转换选项。 这可能为自动或用户自行 – 只是需要确保通知用户，如果此操作所花的位置，因为计算机翻译永远不会是完美 ！

这还可能会影响到音频轨道的外部链接或视频 – 设计应用程序时请务必提前计划来确定的来源时已翻译内容或确保，充分地通知用户通过用户界面时内容都不会显示在其语言。


### <a name="dont-over-translate"></a>请不要过度翻译

应用程序中的某些字符串可能不需要转换，或最起码需要特别注意的转换器。 示例可能包括：

- Url – 如果列出的 URL，它可能，或可能不需要进行调整的语言。 例如，facebook.com 不需要自动的检测到主站点上的语言的翻译。 其他站点具有特定于区域设置的内容以及你可能想要提供不同的 URL，例如与 yahoo.fr 或 yahoo.it yahoo.com。
- 电话号码 – 尤其是具有不同的国家/地区代码或某种特定语言的调用方的数字。
- 联系人详细信息 – 地址和其他信息可能因语言或区域设置而异。
- 商标和产品名称 – 某些字符串不需要转换，因为它们始终相同的语言编写。

最后，请务必包括对该转换器的详细的说明，如果某些字符串需要特殊处理。


### <a name="formatted-text"></a>带格式文本

通常不使用移动应用程序问题因为字符串通常不是具有丰富格式的。 如果应用程序中需要丰富的文本 （例如粗体或斜体格式） 但是确保翻译人员知道如何为输入的格式设置，字符串文件将其存储正确，并且其格式正确显示给用户之前 (即。 不要意外地让格式设置代码本身会向用户显示）。



## <a name="translation-tips"></a>转换技巧

翻译应用程序使用这些字符串被视为可本地化过程的一部分。 通常此任务将外包给翻译服务并执行的多语言可能不知道你的应用程序或您公司的员工。

以下提示有助于生成更轻松地准确地转换并因此改进本地化应用的质量的字符串。



### <a name="localize-complete-strings-not-words"></a>本地化完整字符串，不字

有时开发人员采用尝试指定单个词或句子片段，以便他们可以重用其整个应用程序的方法。 例如，文本"你有 5 条消息。" 它们可能会指定以下字符串进行转换

**错误**:

```csharp
"You have"
"no"
"message"
"messages"
```

然后尝试在代码中使用字符串串联创建正确的短语上动态：

**错误**:

```csharp
"You have" + " " + numMsgs + " " + "messages"
"You have" + " no " + "messages"
```

**不鼓励**因为它不一定适用于所有语言可用，并且将难以翻译人员以了解每个短的段的上下文。 它还会导致重复使用的已翻译的字符串，这更高版本可能导致问题，如果它们在不同的上下文中使用 （，然后会更新）。


### <a name="allow-for-parameter-re-ordering"></a>允许对参数重新排序

不过，.NET 已支持这一概念的带编号的占位符，因此，某些编程语言需要额外的语法来在字符串中，指定参数的顺序

**好**:

```csharp
"a {0} b {1} cde {3}"
```

可以翻译的以下 （其中的位置和占位符的顺序更改）

```csharp
"{2} {3} f g h {0}"
```

和令牌将排序为转换器的预期。 请务必包括每个占位符时将字符串发送给翻译人员所包含的说明。


### <a name="use-multiple-strings-for-cardinality"></a>使用多个字符串的基数

避免类似字符串`"You have {0} message/s."`使用每种状态的特定字符串提供更好的用户体验：

**好**:

```csharp
"You have no messages."
"You have 1 messages."
"You have 2 messages."
"You have {0} messages."
```

必须在您要显示的数字进行计算的应用程序中编写代码，然后选择相应的字符串。 某些平台 （包括 iOS 和 Android） 具有内置功能，可自动选择最佳的复数形式字符串根据当前语言/区域设置的首选项。


### <a name="allowing-for-gender"></a>允许性别

基于拉丁语的语言有时使用不同的词语，具体取决于使用者的性别。 如果您的应用程序知道性别，则应允许已翻译的字符串，以反映此。

此外还有更明显的情况下甚至在英语中，其中字符串表示为特定人员或您的应用程序的用户。 例如，某些站点显示消息，如`"Bob commented on his post"`因此男性、 女性，和非二进制或未知性别需要字符串：

**好**:

```csharp
"{0} commented on his post"
"{0} commented on her post"
"{0} commented on their post"
```

### <a name="dont-reuse-strings"></a>不要重复使用的字符串

或只是因为它们是类似的该字符串本身具有不同的用途或含义时，更准确地说，就不重用字符串。

例如： 假设应用程序中有打开/关闭开关开关控件需要的文本 on 和关闭进行本地化。 您还显示该设置的值在其他位置的应用程序中的文本标签。 您应开关显示交换机的状态 （即使它们是相同的字符串以默认语言） – 与使用不同的字符串，例如所示：

- "开"– 开关本身上显示
- "关闭"– 开关本身上显示
- "开"– 显示在标签中
- "关闭"– 显示在标签中

这会对翻译人员提供最大的灵活性：

- 出于设计原因可能是开关本身使用小写"on"和"关闭"，但显示标签使用大写"On"和"关闭"。
- 某些语言可能需要缩写，不能适应用户界面控件，而完成 （翻译） 单词可以出现在标签的开关值。
- 或者，对于某些语言的呈现你可能是交换机的"I"和"O"用于区域性的熟悉程度、 但仍可能想要阅读"On"或"Off"的标签。

### <a name="translation-services"></a>转换服务

#### <a name="machine-translation"></a>机器翻译

若要构建到你的应用的转换功能，请考虑[Azure 文本翻译 API](https://azure.microsoft.com/services/cognitive-services/translator-text-api/)。

出于测试目的，可以使用许多在线翻译工具在开发过程中应用程序中包含这些本地化的文本：

- [必应在线翻译](https://www.bing.com/translator/)
- [Google 转换](http://translate.google.com/)

还有许多其他可用。 机器翻译的质量通常不会被视为足够好，若要发布的应用程序没有先复查和测试由专业水平或母语。

#### <a name="professional-translation"></a>专业翻译

另外，还有将获取您的字符串并将其分发到其自己的翻译人员，您提供完成翻译付费的专业转换服务。

上最有名的服务之一是[LionBridge](http://www.lionbridge.com/)。 大多数专业服务支持所有常见文件类型包括字符串、 XML、 RESX 和 POT/采购订单。


## <a name="summary"></a>总结

本文介绍了一些概念之前，应已熟悉对您的应用程序进行国际化和本地化资源，然后，还介绍了如何更改每个平台的语言首选项。

这些概念可以应用于可用于 Xamarin 的各种特定于平台和跨平台的国际化技术。

继续阅读你感兴趣的平台的技术详细信息：

- [Xamarin.Forms](~/xamarin-forms/app-fundamentals/localization/index.md)跨平台本地化使用 RESX 文件。
- [Xamarin.iOS](~/ios/app-fundamentals/localization/index.md)本机平台本地化。
- [Xamarin.Android](~/android/app-fundamentals/localization.md)本机平台本地化。



## <a name="related-links"></a>相关链接

- [Apple 的本地化概述](https://developer.apple.com/internationalization/)
- [Android 的本地化清单](https://developer.android.com/distribute/tools/localization-checklist.html)
- [开发全球通用应用程序 (MSDN) 的最佳实践](https://msdn.microsoft.com/library/w7x1y988%28v=vs.90%29.aspx)
